var map;$(document).ready(function(){function o(o){a(o)}function a(o){map.drawRoute({origin:o.origin,destination:o.destination,travelMode:"bicycling",strokeColor:"#131540",strokeOpacity:.3,strokeWeight:3})}map=new GMaps({div:"#mapHolder",zoom:12,lat:51.379444,lng:-2.365556}),$("#submit-options").click(function(){var a="bs57xt",n="bs14nd",i=function(){var o=null;return $.ajax({async:!1,global:!1,url:"/parking.json",dataType:"json",success:function(a){o=a}}),o}();console.log(i.car_parks);for(var t=i.car_parks.length-1;t>=0;t--){console.log(t);var c=i.car_parks[t].postcode;GMaps.geocode({address:a,callback:function(a,i){if("OK"==i){var t=a[0].geometry.location;GMaps.geocode({address:n,callback:function(a,n){if("OK"==n){var i=a[0].geometry.location,e={origin:[t.k,t.A],destination:[i.k,i.A],travelMode:"bicycling",waypoints:[{location:c}]};map.getRoutes({origin:[t.k,t.A],destination:[i.k,i.A],travelMode:"bicycling",waypoints:[{location:c}],callback:function(){o(e)}})}}})}}})}})});